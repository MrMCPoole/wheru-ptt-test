<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>WherU?</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div class="container">
        <!-- 1. Header/Logo -->
        <div class="header">
            <h1>WherU?</h1>
            <div id="status" class="status disconnected">
                Initializing...
            </div>
        </div>
        
        <!-- 2. Contact List/Map -->
        <div class="connection-section">
            <h3>Contacts</h3>
            <button onclick="requestLocationPermission()" style="background: #17a2b8; margin-bottom: 10px;">
                Enable Location Sharing
            </button>
            <div id="friends-list"></div>
        </div>
        
        <!-- Map Container (hidden by default) -->
        <div class="connection-section" id="map-section" style="display: none;">
            <div class="map-container">
                <div id="map"></div>
            </div>
        </div>
        
        <!-- 3. PTT Button and Disconnect -->
        <div class="connection-section" id="controls-section" style="display: none;">
            <div class="control-buttons">
                <button id="ptt-button" class="ptt-button" disabled>
                    Hold to Talk
                </button>
                <button id="disconnect-button" onclick="disconnect()" class="disconnect-button">
                    Disconnect
                </button>
            </div>
            <div id="audio-status" class="audio-status">
                Connect to a friend to enable PTT
            </div>
        </div>
        
        <!-- 4. Add Contact Block -->
        <div class="connection-section">
            <h3>Add Contact</h3>
            <input type="tel" id="friend-phone" placeholder="+1 555 987 6543" maxlength="15">
            <input type="text" id="friend-name" placeholder="Contact's name">
            <button onclick="addFriend()">Add Contact</button>
        </div>
        
        <!-- 5. My Phone Number Block -->
        <div class="connection-section">
            <h3>Your Phone Number</h3>
            <input type="tel" id="my-phone" placeholder="+1 555 123 4567" maxlength="15">
            <button onclick="setMyNumber()">Set My Number</button>
            <div id="my-number-display" class="peer-id" style="display: none;"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/peerjs@1.5.0/dist/peerjs.min.js"></script>
    <script src="script.js"></script>
</body>
</html>